@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-white text-gray-900 font-sans antialiased;
  }

  .dark body {
    @apply bg-dark-900 text-gray-100;
  }

  ::selection {
    @apply bg-primary-500/30 text-primary-100;
  }

  .dark ::selection {
    @apply bg-primary-500/30 text-white;
  }

  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-200;
  }

  .dark ::-webkit-scrollbar-track {
    @apply bg-dark-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-400 rounded-full;
  }

  .dark ::-webkit-scrollbar-thumb {
    @apply bg-terminal-border;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500;
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    @apply bg-terminal-muted;
  }
}

@layer components {
  .prose-custom {
    @apply prose prose-invert prose-lg max-w-none;
    @apply prose-headings:font-bold prose-headings:text-gray-900;
    @apply prose-h1:text-4xl prose-h2:text-3xl prose-h3:text-2xl prose-h4:text-xl;
    @apply prose-p:text-gray-700 prose-p:leading-relaxed;
    @apply prose-a:text-primary-600 prose-a:no-underline hover:prose-a:text-primary-500;
    @apply prose-strong:text-gray-900 prose-strong:font-semibold;
    @apply prose-code:text-primary-700 prose-code:bg-gray-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none;
    @apply prose-pre:bg-gray-900 prose-pre:border prose-pre:border-gray-700;
    @apply prose-blockquote:border-l-primary-500 prose-blockquote:text-gray-600;
    @apply prose-ul:text-gray-700 prose-ol:text-gray-700;
    @apply prose-li:text-gray-700;
    @apply prose-img:rounded-lg prose-img:border prose-img:border-gray-300;
    @apply prose-hr:border-gray-300;
  }

  .dark .prose-custom {
    @apply prose prose-invert;
    @apply prose-headings:text-gray-100;
    @apply prose-p:text-gray-300;
    @apply prose-a:text-primary-400 hover:prose-a:text-primary-300;
    @apply prose-strong:text-gray-100;
    @apply prose-code:text-primary-300 prose-code:bg-dark-800;
    @apply prose-pre:bg-dark-800 prose-pre:border-terminal-border;
    @apply prose-blockquote:text-gray-400;
    @apply prose-ul:text-gray-300 prose-ol:text-gray-300;
    @apply prose-li:text-gray-300;
    @apply prose-img:border-terminal-border;
    @apply prose-hr:border-terminal-border;
  }

  .btn-primary {
    @apply inline-flex items-center justify-center px-6 py-3;
    @apply bg-primary-600 hover:bg-primary-500 text-white font-semibold;
    @apply rounded-lg transition-all duration-300;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-white;
  }

  .dark .btn-primary {
    @apply focus:ring-offset-dark-900;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center px-6 py-3;
    @apply bg-gray-100 hover:bg-gray-200 text-gray-900 font-semibold;
    @apply border border-gray-300 rounded-lg transition-all duration-300;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-white;
  }

  .dark .btn-secondary {
    @apply bg-dark-700 hover:bg-dark-600 text-gray-200;
    @apply border border-terminal-border;
    @apply focus:ring-offset-dark-900;
  }

  .card {
    @apply bg-white border border-gray-200 rounded-xl transition-all duration-300;
  }

  .dark .card {
    @apply bg-dark-800 border border-terminal-border;
  }

  .card:hover {
    @apply border-primary-500/50 shadow-lg shadow-primary-500/10;
  }

  .nav-link {
    @apply text-gray-600 hover:text-gray-900 font-medium transition-colors duration-200;
    @apply relative after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5;
    @apply after:bg-primary-500 after:transition-all after:duration-300;
    @apply hover:after:w-full;
  }

  .dark .nav-link {
    @apply text-gray-400 hover:text-gray-100;
  }

  .nav-link.active {
    @apply text-primary-600 after:w-full;
  }

  .dark .nav-link.active {
    @apply text-primary-400;
  }

  .gradient-text {
    @apply bg-gradient-to-r from-primary-600 to-cyan-600 bg-clip-text text-transparent;
  }

  .dark .gradient-text {
    @apply from-primary-400 to-cyan-400;
  }

  .glow-effect {
    @apply shadow-lg shadow-primary-500/20;
  }

  .code-block-wrapper {
    @apply relative my-6;
  }

  .code-block-header {
    @apply flex items-center justify-between px-4 py-2;
    @apply bg-gray-100 border-b border-gray-300 rounded-t-lg;
  }

  .dark .code-block-header {
    @apply bg-dark-700 border-b border-terminal-border;
  }

  .code-block-language {
    @apply text-xs font-mono text-terminal-muted uppercase tracking-wider;
  }

  .copy-button {
    @apply opacity-0 group-hover:opacity-100 transition-all duration-200;
    @apply flex items-center gap-1.5 px-3 py-1.5;
    @apply text-xs font-medium text-terminal-muted hover:text-gray-100;
    @apply bg-dark-800 hover:bg-dark-600 rounded-md;
    @apply border border-terminal-border;
  }

  .reading-progress {
    @apply fixed top-0 left-0 w-full h-1 z-50;
  }

  .reading-progress-bar {
    @apply h-full bg-gradient-to-r from-primary-500 to-cyan-400;
    @apply transition-all duration-150 ease-out;
  }

  .toc-link {
    @apply block py-1.5 text-sm text-gray-400 hover:text-gray-100 transition-colors duration-200;
    @apply border-l-2 border-transparent hover:border-primary-500 pl-3;
  }

  .toc-link.active {
    @apply text-primary-400 border-primary-500 font-medium;
  }

  .tag {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
    @apply bg-primary-100 text-primary-700 border border-primary-200;
    @apply hover:bg-primary-200 transition-colors duration-200;
  }

  .dark .tag {
    @apply bg-primary-500/10 text-primary-400 border border-primary-500/20;
    @apply hover:bg-primary-500/20;
  }

  .social-link {
    @apply flex items-center justify-center w-10 h-10 rounded-lg;
    @apply bg-gray-100 text-gray-600 hover:text-gray-900;
    @apply border border-gray-300 hover:border-primary-500;
    @apply transition-all duration-200 hover:scale-110;
  }

  .dark .social-link {
    @apply bg-dark-700 text-gray-400 hover:text-gray-100;
    @apply border border-terminal-border hover:border-primary-500;
  }

  /* Image width utilities for markdown content */
  .prose-custom img {
    @apply max-w-full h-auto rounded-lg border border-terminal-border;
  }

  .prose-custom img.img-small {
    @apply max-w-sm mx-auto;
  }

  .prose-custom img.img-medium {
    @apply max-w-md mx-auto;
  }

  .prose-custom img.img-large {
    @apply max-w-2xl mx-auto;
  }

  .prose-custom img.img-full {
    @apply max-w-full;
  }

  .prose-custom .img-caption {
    @apply text-sm text-gray-500 text-center mt-2 italic;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  .animate-slide-up {
    animation: slideUp 0.5s ease-out;
  }
}

/* Syntax Highlighting Customization */
pre.astro-code {
  @apply !bg-dark-800 !border !border-terminal-border rounded-lg !p-4 overflow-x-auto;
  @apply [&>code]:!text-sm [&>code]:!font-mono;
}

.astro-code span {
  @apply !text-gray-300;
}

/* Token colors for Dracula theme */
.astro-code .token.comment,
.astro-code .token.prolog,
.astro-code .token.doctype,
.astro-code .token.cdata {
  @apply !text-gray-500;
}

.astro-code .token.function,
.astro-code .token.class-name {
  @apply !text-purple-400;
}

.astro-code .token.keyword {
  @apply !text-pink-400;
}

.astro-code .token.string,
.astro-code .token.template-string {
  @apply !text-yellow-300;
}

.astro-code .token.number,
.astro-code .token.boolean {
  @apply !text-cyan-400;
}

.astro-code .token.operator {
  @apply !text-pink-400;
}

.astro-code .token.property,
.astro-code .token.attr-name {
  @apply !text-green-400;
}

.astro-code .token.attr-value {
  @apply !text-yellow-300;
}

/* Table of Contents Styles */
.toc-container {
  @apply sticky top-24 max-h-[calc(100vh-8rem)] overflow-y-auto;
}

/* Mobile menu animation */
.mobile-menu-enter {
  @apply opacity-0 translate-x-full;
}

.mobile-menu-enter-active {
  @apply opacity-100 translate-x-0 transition-all duration-300;
}

.mobile-menu-exit {
  @apply opacity-100 translate-x-0;
}

.mobile-menu-exit-active {
  @apply opacity-0 translate-x-full transition-all duration-300;
}
